<body class="blue"><div id="LeadsPageView" class="ZurmoDefaultPageView ZurmoPageView PageView"><div id="ZurmoDefaultView"><div class="GridView"><div id="HeaderView"><!-- Start of themes/default/templates/HeaderView.xhtml --><div id="MainLogo" class="zurmo-logo"></div>
<div class="GridView"><div id="HeaderLinksView"><div class="clearfix"><a href="#" id="nav-trigger" title="Toggle Navigation">&rsaquo;</a><div id="corp-logo"><a href="/zurmo/app/index.php/home/default"><img src="/zurmo/app/themes/default/images/Zurmo_logo.png" alt="Zurmo Logo" height="32" width="107" /></a></div><div id="user-toolbar" class="clearfix"><div id="header-game-dashboard-link-wrapper" class="user-menu-item"><a id="header-game-dashboard-link" href="#">âˆ‚</a></div><ul id="user-header-menu" class="user-menu-item nav">

<li class="parent last"><a href="javascript:void(0);"><span>super</span></a>
<ul>
<li><a href="/zurmo/app/index.php/users/default/profile"><span>My Profile</span></a></li>
<li><a href="/zurmo/app/index.php/gamification/default/leaderboard"><span>Leaderboard</span></a></li>
<li><a href="/zurmo/app/index.php/emailMessages/default/matchingList"><span>Data Cleanup</span></a></li>
<li class="last"><a href="/zurmo/app/index.php/zurmo/default/logout"><span>Sign out</span></a></li>
</ul>
</li>
</ul>

<ul id="settings-header-menu" class="user-menu-item nav">
<li class="parent last"><a href="javascript:void(0);"><span>Administration</span></a>
<ul>
<li><a href="/zurmo/app/index.php/configuration"><span>Administration</span></a></li>
<li><a href="/zurmo/app/index.php/designer/default"><span>Designer</span></a></li>
<li><a href="/zurmo/app/index.php/import/default"><span>Import</span></a></li>
<li><a href="/zurmo/app/index.php/users/default"><span>Users</span></a></li>
<li><a href="http://www.zurmo.com/needSupport.php"><span>Need Support?</span></a></li>
<li class="last"><a href="/zurmo/app/index.php/zurmo/default/about"><span>About Zurmo</span></a></li>
</ul>
</li>
</ul></div></div>

</div><div class="GridView"><div id="GlobalSearchAndShortcutsCreateMenuView"><div id="app-search" class="clearfix"><select class="ignore-style" id="globalSearchScope" multiple="multiple" style="display:none;" size="4" name="globalSearchScope[]">
<option value="All" selected="selected">All</option>
<option value="accounts">Accounts</option>
<option value="contacts">Contacts</option>
<option value="leads">Leads</option>
<option value="opportunities">Opportunities</option>
</select><input class="global-search global-search-hint" onfocus="$(this).removeClass(&quot;global-search-hint&quot;); $(this).val(&quot;&quot;);" onblur="$(this).val(&quot;&quot;)" id="globalSearchInput" type="text" value="Search by name, phone, or e-mail" name="globalSearchInput" /><span class="z-spinner"></span></div><ul id="ShortcutsMenu" class="nav">
<li class="parent last"><a href="javascript:void(0);"><span>Create</span></a>
<ul>
<li><a href="/zurmo/app/index.php/accounts/default/create"><span>Account</span></a></li>
<li><a href="/zurmo/app/index.php/contacts/default/create"><span>Contact</span></a></li>
<li><a href="/zurmo/app/index.php/conversations/default/create"><span>Conversation</span></a></li>
<li><a href="/zurmo/app/index.php/leads/default/create"><span>Lead</span></a></li>
<li><a href="/zurmo/app/index.php/missions/default/create"><span>Mission</span></a></li>
<li><a href="/zurmo/app/index.php/opportunities/default/create"><span>Opportunity</span></a></li>
<li><a href="/zurmo/app/index.php/reports/default/selectType"><span>Report</span></a></li>
<li class="last"><a href="#" id="yt0"><span>Task</span></a></li>
</ul>
</li>
</ul></div></div></div>



<!-- End of themes/default/templates/HeaderView.xhtml --></div><div class="AppContainer clearfix GridView"><div class="AppNavigation clearfix GridView"><div id="MenuView"><ul class="nav">
<li id="home"><a href="/zurmobajakan/public/application/index/index"><span></span><em></em><span>Home</span></a></li>
<li id="mashableInbox"><a href="/zurmobajakan/public/inbox/inbox/index"><span></span><em></em><span>Inbox<span class="unread-inbox-count">1</span></span></a></li>
<li id="accounts"><a href="/zurmobajakan/public/account/account/index"><span></span><em></em><span>Accounts</span></a></li>
<li id="leads" class="active"><a href="/zurmobajakan/public/leads/leads/index"><span></span><em></em><span>Leads</span></a></li>
<li id="contacts"><a href="/zurmobajakan/public/contact/contact/index"><span></span><em></em><span>Contacts</span></a></li>
<li id="opportunities"><a href="/zurmobajakan/public/opportunity/opportunity/index"><span></span><em></em><span>Opportunities</span></a></li>
<li id="marketing" class="hidden-nav-item"><a href="/zurmobajakan/public/marketing/marketing/index"><span></span><em></em><span>Marketing</span></a></li>
<li id="projects" class="hidden-nav-item"><a href="/zurmobajakan/public/project/project/index"><span></span><em></em><span>Projects</span></a></li>
<li id="products" class="hidden-nav-item"><a href="/zurmobajakan/public/product/"><span></span><em></em><span>Products</span></a></li>
<li id="reports" class="hidden-nav-item last"><a href="/zurmobajakan/public/report/report/index"><span></span><em></em><span>Reports</span></a></li>
</ul>

<a class="toggle-hidden-nav-items"></a></div><div id="RecentlyViewedView"><h3>Recently Viewed</h3><ul class="nav">
<li class="type-LeadsModule"><a href="/zurmo/app/index.php/leads/default/details?id=30"><span></span><em></em><span>Ryeowook Kim</span></a></li>
<li class="type-LeadsModule last"><a href="/zurmo/app/index.php/leads/default/details?id=29"><span></span><em></em><span>Ryeowook Kim</span></a></li>
</ul></div></div><div id="ActionBarSearchAndListView" class="AppContent GridView"><div id="SecuredActionBarForSearchAndListView" class="ActionBarForSearchAndListView ActionBarConfigurableMetadataView ConfigurableMetadataView MetadataView"><div class="view-toolbar-container clearfix"><nav class="pillbox clearfix"><div id="CreateMenuActionElement--yt1" class="default-button">
<a class="button-action" href="/ZurmoBajakan/public/leads/leads/create"><i class="icon-create"></i><span class="button-label">Create</span></a></div><div id="MassEditMenuActionElement--yt2" class="default-button">
<a class="button-action-trigger"><i class="icon-edit"></i><span class="button-label">Update</span><i class="icon-trigger"></i></a><ul class="button-actions"><li id="list-view-massActionSelected"><a href="#">Selected</a></li><li id="list-view-massActionAll"><a href="#">All Results</a></li></ul></div><div id="ExportMenuActionElement--yt3" class="default-button">

<a class="button-action-trigger"><i class="icon-export"></i><span class="button-label">Export</span><i class="icon-trigger"></i></a><ul class="button-actions"><li id="list-view-exportActionSelected"><a href="#">Selected</a></li><li id="list-view-exportActionAll"><a href="#">All Results</a></li></ul></div><div id="MassDeleteMenuActionElement--yt4" class="default-button">
<a class="button-action-trigger"><i class="icon-delete"></i><span class="button-label">Delete</span><i class="icon-trigger"></i></a><ul class="button-actions"><li id="list-view-deleteMassActionSelected"><a href="#">Selected</a></li><li id="list-view-deleteMassActionAll"><a href="#">All Results</a></li></ul></div></nav></div></div><div id="LeadsSearchView" class="SavedDynamicSearchView DynamicSearchView SearchView ModelView ConfigurableMetadataView MetadataView"><div class="wide form"><form id="search-form" action="/zurmo/app/index.php/zurmo/default/validateDynamicSearch?viewClassName=LeadsSearchView&amp;modelClassName=Contact&amp;formModelClassName=LeadsSearchForm" method="post">

<div style="display:none"><input type="hidden" value="201893ec04cc1d6d814e80ae1b2e9a4f6d7028fd" name="YII_CSRF_TOKEN" /></div><div id="list-view-summary-clone" class="list-view-items-summary-clone"></div><div class="search-view-0" ><table><tr><th></th><td colspan="3"><select class="ignore-style ignore-clearform" id="LeadsSearchForm_anyMixedAttributesScope" multiple="multiple" style="display:none;" size="4" name="LeadsSearchForm[anyMixedAttributesScope][]">
<option value="All" selected="selected">All</option>
<option value="fullName">Name</option>
<option value="anyEmail">Any Email Address</option>
<option value="officePhone">Office Phone</option>
<option value="mobilePhone">Mobile Phone</option>
<option value="companyName">Company Name</option>
</select><input class="input-hint anyMixedAttributes-input" onfocus="$(this).select();" size="80" id="LeadsSearchForm_anyMixedAttributes" name="LeadsSearchForm[anyMixedAttributes]" type="text" /><div class="errorMessage" id="LeadsSearchForm_anyMixedAttributes_em_" style="display:none"></div></td></tr></table><input class="search-form_filterByStarred" name="LeadsSearchForm[filterByStarred]" id="LeadsSearchForm_filterByStarred" type="hidden" /></div><div class="search-view-1" style='display:none;'><div class="hasDropDown"><span class="select-arrow"></span><select id="savedSearchId" name="savedSearchId">
<option value="">Load a saved search</option>
</select></div><div id="search-form_es_" class="errorSummary" style="display:none"><p>Please fix the following input errors:</p>
<ul><li>dummy</li></ul></div><div style="display:none;"><input id="LeadsSearchForm_dynamicClausesNotUsed" name="dynamicClausesValidationHelper" value="notUsed" type="hidden" /><div id="LeadsSearchForm_dynamicClauses" class="errorMessage" style="display:none"></div></div><div class="add-fields-container"><input id="rowCounter-search-form" type="hidden" value="0" name="rowCounter" /><a id="addExtraAdvancedSearchRowButton-search-form" href="#"><span class="z-spinner"></span><span class="z-icon"></span><span class="z-label">Add criteria</span></a></div><div class="search-save-container"><strong class="mp-divider"> &middot; </strong><a id="save-as-advanced-search" href="#">Save search</a></div><div id="save-search-area" class="view-toolbar-container clearfix" style="display:none;"><input name="LeadsSearchForm[savedSearchName]" id="LeadsSearchForm_savedSearchName" type="text" maxlength="64" /><input name="LeadsSearchForm[savedSearchId]" id="LeadsSearchForm_savedSearchId" type="hidden" /><input name="LeadsSearchForm[sortAttribute]" id="LeadsSearchForm_sortAttribute" type="hidden" /><input name="LeadsSearchForm[sortDescending]" id="LeadsSearchForm_sortDescending" type="hidden" /><a id="save-advanced-search" name="save" class="attachLoading z-button" value="saveSearch" onclick="js:$(this).addClass(&quot;attachLoadingTarget&quot;);jQuery.yii.submitForm(this, &#039;&#039;, {&#039;save&#039;:&#039;save&#039;}); return false;" href="#"><span class="z-spinner"></span><span class="z-icon"></span><span class="z-label">Save</span></a><div class="errorMessage" id="LeadsSearchForm_savedSearchName_em_" style="display:none"></div></div><div id="show-dynamic-search-structure-wrapper-search-form" style="display:none;"><a id="show-dynamic-search-structure-div-link-search-form" style="" href="#">Modify Structure</a><div id="show-dynamic-search-structure-div-search-form" class="has-lang-label" style="display:none;"><input id="LeadsSearchForm_dynamicStructure" name="LeadsSearchForm[dynamicStructure]" class="dynamic-search-structure-input" type="text" /><span>Search Operator</span><div class="errorMessage" id="LeadsSearchForm_dynamicStructure_em_" style="display:none"></div></div></div><div class="view-toolbar-container clearfix"><div class="form-toolbar"><a id="cancel-advanced-search" class="z-button" href="#"><span class="z-label">Close</span></a><a id="search-advanced-search" name="save" class="attachLoading z-button" onclick="js:$(this).addClass(&quot;attachLoadingTarget&quot;);jQuery.yii.submitForm(this, &#039;&#039;, {&#039;save&#039;:&#039;save&#039;}); return false;" href="#"><span class="z-spinner"></span><span class="z-icon"></span><span class="z-label">Search</span></a></div></div></div><div class="select-list-attributes-view" style="display:none"><div class="attributesContainer"><table><tbody><tr><td><div class="multiselect-holder"><div class="multiselect-left"><label>Hidden Columns</label><select size="10" multiple="multiple" class="ignore-style multiple" id="LeadsSearchForm_selectedListAttributes_hidden" name="LeadsSearchForm[selectedListAttributes]_hidden[]">
<option value="createdByUser">Created By User</option>
<option value="createdDateTime">Created Date Time</option>
<option value="department">Department</option>
<option value="description">Description</option>
<option value="firstName">First Name</option>
<option value="googleWebTrackingId">Google Web Tracking Id</option>
<option value="id">Id</option>
<option value="industry">Industry</option>
<option value="jobTitle">Job Title</option>
<option value="lastName">Last Name</option>
<option value="latestActivityDateTime">Latest Activity Date Time</option>
<option value="mobilePhone">Mobile Phone</option>
<option value="modifiedByUser">Modified By User</option>
<option value="modifiedDateTime">Modified Date Time</option>
<option value="officeFax">Office Fax</option>
<option value="officePhone">Office Phone</option>
<option value="primaryAddress">Primary Address</option>
<option value="primaryEmail">Primary Email</option>
<option value="title">Salutation</option>
<option value="secondaryAddress">Secondary Address</option>
<option value="secondaryEmail">Secondary Email</option>
<option value="source">Source</option>
<option value="website">Website</option>


</select></div><div class="multiselect-nav"><input id="yw2moveRight" class="icon-right-arrow" name="yt7" type="button" value="7" /><input id="yw2moveLeft" class="icon-left-arrow" name="yt8" type="button" value="8" /></div><div class="multiselect-right"><label>Visible Columns</label><select size="10" multiple="multiple" class="ignore-style multiple" id="LeadsSearchForm_selectedListAttributes" name="LeadsSearchForm[selectedListAttributes][]">
<option value="FullName">Full Name</option>
<option value="companyName">Company Name</option>
<option value="state">Status</option>
<option value="owner">Owner</option>
</select></div><div class="multiselect-nav multiselect-nav-updown"><input id="yw2moveUp" class="icon-up-arrow" name="yt9" type="button" value="5" /><input id="yw2moveDown" class="icon-down-arrow" name="yt10" type="button" value="6" /></div></div></td></tr></tbody></table></div><div class="view-toolbar-container"><div class="form-toolbar clearfix"><a id="list-attributes-reset" name="save" class="default-btn z-button" onclick="js:$(this).addClass(&quot;attachLoadingTarget&quot;);jQuery.yii.submitForm(this, &#039;&#039;, {&#039;save&#039;:&#039;save&#039;}); return false;" href="#"><span class="z-spinner"></span><span class="z-icon"></span><span class="z-label">Reset</span></a><a id="list-attributes-apply" name="save" class="attachLoading z-button" onclick="js:$(this).addClass(&quot;attachLoadingTarget&quot;);jQuery.yii.submitForm(this, &#039;&#039;, {&#039;save&#039;:&#039;save&#039;}); return false;" href="#"><span class="z-spinner"></span><span class="z-icon"></span><span class="z-label">Apply</span></a></div></div></div><div class="search-form-tools"><a id="more-search-link" href="#">Advanced</a><a id="select-list-attributes-link" href="#">Columns</a><a id="clear-search-link" style="display:none;" href="#"><span class="clear-search-link-criteria-selected-count"></span>Criteria Selected <span class="icon-clear">Z</span></a><input id="clearingSearch-search-form" type="hidden" name="clearingSearch" /></div></form><div id="modalContainer-search-form"></div></div></div><div id="LeadsListView" class="StarredListView SecuredListView ListView ModelView ConfigurableMetadataView MetadataView"><div class="cgrid-view type-leads" id="list-view">

  
<div class="summary">13 result(s)</div><div class="items-wrapper"><table class="items">
<thead>
<tr>
<th class="checkbox-column" id="list-view-rowSelector"><label class="hasCheckBox"><input type="checkbox" value="1" name="list-view-rowSelector_all" id="list-view-rowSelector_all" /></label></th><th id="list-view_columnStar"><a class="icon-star unstarred" id="starDataColumn_filterByStarred" onclick="
                var newVal = (parseInt($(&#039;.search-form_filterByStarred&#039;).val()) + 1) % 2;
                if (isNaN(newVal))
                {
                    newVal = 1;
                }
                $(&#039;.search-form_filterByStarred&#039;).val(newVal);
                $(&#039;#list-view&#039;).yiiGridView(&#039;update&#039;, {url: &#039;/zurmo/app/index.php/leads/default/index?modelClassName=Contact&#039;, data: $(&#039;#search-form&#039;).serialize()});
                " href="#">w</a></th><th id="list-view_c2"><a class="sort-link" href="/zurmo/app/index.php/leads/default/index?Contact_sort=firstName">Name</a></th><th id="list-view_c3"><a class="sort-link" href="/zurmo/app/index.php/leads/default/index?Contact_sort=companyName">Company Name</a></th><th id="list-view_c4"><a class="sort-link" href="/zurmo/app/index.php/leads/default/index?Contact_sort=state">Status</a></th><th id="list-view_c5"><a class="sort-link" href="/zurmo/app/index.php/leads/default/index?Contact_sort=owner">Owner</a></th><th class="button-column" id="list-view_c6">&#160;</th></tr>
</thead>
<tbody>

<!--  
<?php 
$con=mysqli_connect("localhost", "root", "", "zurmo");
if (mysqli_connect_errno($con))
{
	echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$result = mysqli_query($con,"SELECT person.firstname, person.lastname, contact.companyname, contactstate.name, contactstate.id, 
FROM person, contact, contactstate
WHERE person.id = contact.person_id AND contact.state_contactstate_id = contactstate.id AND contact.state_contactstate_id <> 5 AND contact.state_contactstate_id <> 6 ORDER BY person.id DESC ") ;

while($row = mysqli_fetch_array($result))
{
	echo "<tr>";
	echo "<td class='checkbox-column'><label class='hasCheckBox'><input value='30' id='list-view-rowSelector_0' type='checkbox' name='list-view-rowSelector[]' />"."</td>";
	echo "<td class='star-column'><a class='icon-star unstarred' id='star-Contact-30' href='#'>w</a>&#160"."</td>";
	echo "<td>" . $row['firstname'] ." " . $row['lastname']."</td>";
	echo "<td>" . $row['companyname'] . "</td>";
	echo "<td>" . $row['name'] . "</td>";
	echo "<td>" . $row['id'] . "</td>";
	echo "</tr>";
}
echo "</table>";


?>
-->

  
<tr class="odd">
<td class="checkbox-column"><label class="hasCheckBox"><input value="30" id="list-view-rowSelector_0" type="checkbox" name="list-view-rowSelector[]" /></label></td><td class="star-column"><a class="icon-star unstarred" id="star-Contact-30" href="#">w</a>&#160;</td><td><a href="/ZurmoBajakan/public/leads/leads/viewdetail">Ryeowook Kim</a></td><td>SM Entertainment</td><td>New</td><td>Super User</td><td class="button-column"><a class="pencil" title="Update" href="/ZurmoBajakan/public/leads/leads/edit">!</a></td></tr>

</tbody>
</table></div><div class="pager vertical"><ul id="yw3" class="endless-list-pager"><li class="next"><a id="list-view-endless-page" class="vertical-forward-pager" href="#"><span>next</span></a></li></ul></div><div class="list-preloader"><span class="z-spinner"></span></div><div class="keys" style="display:none" title="/zurmo/app/index.php/leads/default"><span>30</span></div>
</div>


<input type="hidden" value="" name="list-view-selectedIds" id="list-view-selectedIds" />
</div></div><div id="FlashMessageView"><div id = "FlashMessageBar"></div></div></div><div id="ModalContainerView"><div id="modalContainer"></div></div><div id="ModalGameNotificationContainerView"></div><div id="GameCoinContainerView"></div><div id="FooterView"><a href="http://www.zurmo.com" id="credit-link" class="clearfix"><span>Copyright &#169; Zurmo Inc., 2013. All rights reserved.</span></a><div class="ui-chooser"><a class="icon-mobile" href="/zurmo/app/index.php/zurmo/default/userInterface?userInterface=Mobile"><span>Show Mobile</span></a><a class="icon-desktop active" href="/zurmo/app/index.php/zurmo/default/userInterface?userInterface=Desktop"><span>Show Full</span></a></div></div></div></div></div><script type="text/javascript">
/*<![CDATA[*/
function closeGamificationDashboard(){
                           $('#UserGameDashboardView').remove();
                           $('body').removeClass('gd-dashboard-active');
                           $('#header-game-dashboard-link').html('âˆ‚').toggleClass('highlighted');
                       }

                function deleteSavedSearchAndRemoveFromView(modelId)
                {
                        $.ajax({
                            url : '/zurmo/app/index.php/zurmo/default/deleteSavedSearch?id=' + modelId,
                            type : 'GET',
                            dataType : 'json',
                            success : function(data)
                            {
                               var inputId = 'savedSearchId';
                               $('#' + inputId + ' > option').each(function(){
                                   if (this.value == modelId)
                                   {
                                       $('#' + inputId + ' option[value=\'' + this.value + '\']').remove();
                                   }
                               });
                               $('#removeSavedSearch').remove();
                               $('#LeadsSearchForm_savedSearchId').val('');
                            },
                            error : function()
                            {
                                //todo: error call
                            }
                        });
                }
            
jQuery(function($) {

                    jQuery("body").ajaxComplete(
                        function(event, request, options)
                        {
                            if (request.responseText == "sessionTimeout")
                            {
                                $.cookie("sessionTimeoutCookie", 1,
                                        {
                                            expires : 1,
                                            path:  "/"
                                        });
                                window.location.reload(true);
                            }
                        }
                    );
                
$('#go-to-dashboard-link, #close-game-notification-link').click(function(event){
                           event.preventDefault();
                           $('#game-notification').fadeOut(300, function(){
                               $('#game-notification').remove();
                           });
                       });
                       $('.gd-dashboard-active').on('click', function(){
                           if($('#UserGameDashboardView').length){
                               closeGamificationDashboard();
                           }
                           return false;
                       });
$('body').on('click', '#header-game-dashboard-link', function(){jQuery.ajax({'beforeSend':function(){
                    if($("#UserGameDashboardView").length){
                        closeGamificationDashboard();
                        return false;
                    }
                    $("body").addClass("gd-dashboard-active");
                    $("#header-game-dashboard-link").html("â€°").toggleClass("highlighted");
                },'success':function(data){$("#FooterView").after(data);},'url':'/zurmo/app/index.php/users/default/gameDashboard?id=1','cache':false});return false;});
  $(".nav li").hover(
    function () {
      if ($(this).hasClass("parent")) {
        $(this).addClass("over");
      }
    },
    function () {
      $(this).removeClass("over");
    }
  );

$("#globalSearchScope").bind("multiselectclick", function(event, ui){
                            if ($("#globalSearchScope").multiselect("widget").find(":checkbox:checked").length == 0)
                            {
                                $("#globalSearchScope").multiselect("widget").find(":checkbox").each(function(){
                                    if (this.value == "All" && !this.checked)
                                    {
                                        this.click();
                                    }
                                });
                            }
                            if (ui.value == "All" && ui.checked)
                            {
                                $("#globalSearchScope").multiselect("widget").find(":checkbox").each(function(){
                                    if (this.value != "All" && this.checked)
                                    {
                                        this.click();
                                    }
                                });
                            }
                            else if (ui.value != "All" && ui.checked)
                            {
                                $("#globalSearchScope").multiselect("widget").find(":checkbox").each(function(){
                                    if (this.value == "All" && this.checked)
                                    {
                                        this.click();
                                    }
                                });
                            }
                        });
                       
$('#globalSearchScope').multiselect({'selectedText':'','noneSelectedText':'','header':false,'position':{'my':'right top','at':'right bottom'}}); $(this).setupCheckboxStyling($('#globalSearchScope').parent())
$("#globalSearchInput").bind("focus", function(event, ui){
                            $("#globalSearchInput").autocomplete("option", "source", "/zurmo/app/index.php/zurmo/default/globalSearchAutoComplete?" + $.param($("#globalSearchScope").serializeArray()));
                        });
                       
jQuery('#globalSearchInput').autocomplete({'select': function(event, ui) {if (ui.item.href.length > 0){window.location = ui.item.href;} return false;},'search': function(event, ui) { $(this).makeOrRemoveTogglableSpinner(true, "#app-search") },'open': function(event, ui) { $(this).makeOrRemoveTogglableSpinner(false, "#app-search") },'position':{'my':'right top','at':'right bottom'},'source':'/zurmo/app/index.php/zurmo/default/globalSearchAutoComplete'});
 $("#globalSearchInput").data( "autocomplete" )._renderItem = function( ul, item ) {
                            return $( "<li></li>" ).data( "item.autocomplete", item )
                                    .append( "<a><span class=" + item.iconClass + "></span><span>" + item.label + "</span></a>" )
                                    .appendTo( ul );
                        };
$('body').on('click', '#yt0', function(){jQuery.ajax({'beforeSend':function(){
                jQuery('#modalContainer').html('');
                $(this).makeLargeLoadingSpinner(true, '#modalContainer');
                window.scrollTo(0, 0);
                jQuery('#modalContainer').dialog({
                    'title' : 'Create Task',
                    'autoOpen' : true,
                    'modal' : true,
                    'position' : 'center top+25',
                    'dialogClass' : 'task-dialog',
                    'height' : 'auto',
                    'open': function( event, ui )  { jQuery('#modalContainer').parent().addClass('openingModal'); },
                    'close': function( event, ui ) { jQuery('#modalContainer').parent().removeClass('openingModal');
                                                     $('#modalContainer').dialog('destroy');
                                                     
                                                     }
                });
                return true;
            },'url':'/zurmo/app/index.php/tasks/default/modalCreate?modalId=modalContainer','cache':false,'success':function(html){jQuery("#modalContainer").html(html)}});return false;});

                        function massActionMenuActionElementEventHandler(elementType, gridId, baseUrl, actionId, pageVarName)
                        {
                            selectAll = '';
                            if (elementType == 1)
                            {
                                if ($('#' + gridId + '-selectedIds').val() == '')
                                {
                                    alert('You must select at least one record');
                                    $(this).val('');
                                    return false;
                                }
                            }
                            else
                            {
                                selectAll = 1;
                            }
                            var options =
                            {
                                url     : $.fn.yiiGridView.getUrl(gridId),
                                baseUrl : baseUrl
                            }
                            if (options.url.split( '?' ).length == 2)
                            {
                                options.url = options.baseUrl + '/' + actionId + '?' + options.url.split( '?' )[1];
                            }
                            else
                            {
                                options.url = options.baseUrl + '/' + actionId;
                            }
                            if (elementType == 1)
                            {
                                addListViewSelectedIdsToUrl(gridId, options);
                            }
                            var data = '' + actionId + '=' + '&selectAll=' + selectAll + '&ajax=&' + pageVarName + '=1';
                            url = $.param.querystring(options.url, data);
                            url += '';
                            window.location.href = url;
                            return false;
                        }
                
$('#list-view-massActionAll').unbind('click.action').bind('click.action', function()
                                {
                                    massActionMenuActionElementEventHandler(0, 'list-view', '/zurmo/app/index.php/leads/default', 'massEdit', 'Contact_page')
                                }
                            );
$('#list-view-massActionSelected').unbind('click.action').bind('click.action', function()
                                {
                                    massActionMenuActionElementEventHandler(1, 'list-view', '/zurmo/app/index.php/leads/default', 'massEdit', 'Contact_page')
                                }
                            );
$('#list-view-exportActionAll').unbind('click.action').bind('click.action', function()
                                {
                                    massActionMenuActionElementEventHandler(0, 'list-view', '/zurmo/app/index.php/leads/default', 'export', 'Contact_page')
                                }
                            );
$('#list-view-exportActionSelected').unbind('click.action').bind('click.action', function()
                                {
                                    massActionMenuActionElementEventHandler(1, 'list-view', '/zurmo/app/index.php/leads/default', 'export', 'Contact_page')
                                }
                            );
$('#list-view-deleteMassActionAll').unbind('click.action').bind('click.action', function()
                                {
                                    massActionMenuActionElementEventHandler(0, 'list-view', '/zurmo/app/index.php/leads/default', 'massDelete', 'Contact_page')
                                }
                            );
$('#list-view-deleteMassActionSelected').unbind('click.action').bind('click.action', function()
                                {
                                    massActionMenuActionElementEventHandler(1, 'list-view', '/zurmo/app/index.php/leads/default', 'massDelete', 'Contact_page')
                                }
                            );
$("#LeadsSearchForm_anyMixedAttributesScope").bind("multiselectclick", function(event, ui){
                            if ($("#LeadsSearchForm_anyMixedAttributesScope").multiselect("widget").find(":checkbox:checked").length == 0)
                            {
                                $("#LeadsSearchForm_anyMixedAttributesScope").multiselect("widget").find(":checkbox").each(function(){
                                    if (this.value == "All" && !this.checked)
                                    {
                                        this.click();
                                    }
                                });
                            }
                            if (ui.value == "All" && ui.checked)
                            {
                                $("#LeadsSearchForm_anyMixedAttributesScope").multiselect("widget").find(":checkbox").each(function(){
                                    if (this.value != "All" && this.checked)
                                    {
                                        this.click();
                                    }
                                });
                            }
                            else if (ui.value != "All" && ui.checked)
                            {
                                $("#LeadsSearchForm_anyMixedAttributesScope").multiselect("widget").find(":checkbox").each(function(){
                                    if (this.value == "All" && this.checked)
                                    {
                                        this.click();
                                    }
                                });
                            }
                        });
                       
$('#LeadsSearchForm_anyMixedAttributesScope').multiselect({'selectedText':'','noneSelectedText':'','header':false}); $(this).setupCheckboxStyling($('#LeadsSearchForm_anyMixedAttributesScope').parent())
 basicSearchQueued = 0; basicSearchOldValue = '';   var basicSearchHandler = function(event)
                            {
                                if (basicSearchOldValue != $(this).val())
                                {
                                    basicSearchOldValue = $(this).val();
                                    basicSearchQueued = basicSearchQueued  + 1;
                                    setTimeout('basicSearchQueued = basicSearchQueued - 1', 900);
                                    setTimeout('$(this).searchByQueuedSearch("LeadsSearchForm_anyMixedAttributes")', 1000);
                                }
                            };   $('#LeadsSearchForm_anyMixedAttributes').unbind('input.ajax propertychange.ajax keyup.ajax');
                                $('#LeadsSearchForm_anyMixedAttributes').bind('input.ajax propertychange.ajax keyup.ajax', basicSearchHandler);
                            

                $('#savedSearchId').unbind('change'); $('#savedSearchId').bind('change', function()
                {
                    if ($(this).val() != '')
                    {
                        savedSearchId = $(this).val();
                        $.ajax(
                        {
                          url: '/zurmo/app/index.php/zurmo/default/clearStickySearch?key=LeadsSearchView',
                          complete: function(data)
                          {
                              window.location = '/zurmo/app/index.php/leads/default/list?savedSearchId=' + savedSearchId;
                          }
                        });
                    }
                });
$('body').off('click.add', '#addExtraAdvancedSearchRowButton-search-form'); $('body').on('click.add', '#addExtraAdvancedSearchRowButton-search-form', function(){jQuery.ajax({'type':'GET','data':'rowNumber=' + $('#rowCounter-search-form').val(),'beforeSend':function(){
                                            $(this).makeOrRemoveLoadingSpinner(true, "#search-form", "dark");
                                            },'success':function(data){
                                            $('#rowCounter-search-form').val(parseInt($('#rowCounter-search-form').val()) + 1)
                                            $('#addExtraAdvancedSearchRowButton-search-form').parent().before(data);
                                            rebuildDynamicSearchRowNumbersAndStructureInput("search-form");
                                            resolveClearLinkPrefixLabelAndVisibility("search-form");
                                            $(this).makeOrRemoveLoadingSpinner(false, "#search-form");
                                          },'url':'/zurmo/app/index.php/zurmo/default/dynamicSearchAddExtraRow?viewClassName=LeadsSearchView&modelClassName=Contact&formModelClassName=LeadsSearchForm&suffix=search-form','cache':false});return false;});

                $('#select-list-attributes-link').unbind('click.more');
                $('#select-list-attributes-link').bind('click.more',  function(event)
                    {
                        $(this).closest('form').find('.search-view-1').hide();
                        $(this).closest('form').find('.kanban-board-options-view').hide();
                        $('.select-list-attributes-view').toggle();
                        return false;
                    }
                );
                $('#list-attributes-reset').unbind('click.close');
                $('#list-attributes-reset').bind('click.close', function()
                    {
                        $('.select-list-attributes-view').hide();
                    }
                );
                $('#list-attributes-apply').unbind('click.close');
                $('#list-attributes-apply').bind('click.close', function()
                    {
                        $('.select-list-attributes-view').hide();
                    }
                );
                
$('#yw2moveRight').click(function()
                            {
                                return !$('#LeadsSearchForm_selectedListAttributes_hidden option:selected')
                                .remove().appendTo('#LeadsSearchForm_selectedListAttributes');
                            });
                            $('#yw2moveLeft').click(function()
                            {
                                return !$('#LeadsSearchForm_selectedListAttributes option:selected')
                                .remove().appendTo('#LeadsSearchForm_selectedListAttributes_hidden');
                            });$('#search-form').submit(function()
                            {
                                $('#LeadsSearchForm_selectedListAttributes_hidden option').each(function(i)
                                {
                                    $(this).attr('selected', 'selected');
                                });
                            });$('#search-form').submit(function()
                            {
                                $('#LeadsSearchForm_selectedListAttributes option').each(function(i)
                                {
                                    $(this).attr('selected', 'selected');
                                });
                            });$('#yw2moveUp').click(function()
                            {
                                if ($('#LeadsSearchForm_selectedListAttributes option:selected').first().index() > 0)
                                {
                                    $('#LeadsSearchForm_selectedListAttributes option:selected').each(function()
                                    {
                                       $(this).insertBefore($(this).prev());
                                    });
                                }
                            });
                            $('#yw2moveDown').click(function()
                            {
                                if ($('#LeadsSearchForm_selectedListAttributes option:selected').last().index() < ($('#LeadsSearchForm_selectedListAttributes option').length - 1))
                                {
                                    $($('#LeadsSearchForm_selectedListAttributes option:selected').get().reverse()).each(function(i, selected)
                                    {
                                        if (!$(this).next().length) return false;
                                        $(this).insertAfter($(this).next());
                                    });
                                }
                            });

                $('#list-attributes-reset').unbind('click.reset');
                $('#list-attributes-reset').bind('click.reset', function()
                    {
                        $('.select-list-attributes-view').hide();
                        resetSelectedListAttributes('LeadsSearchForm_selectedListAttributes', 'LeadsSearchForm_selectedListAttributes_hidden', ["companyName","state","owner","FullName"]);
                    }
                );

                $('#clear-search-link').removeAttr('clearForm');
                $('#clear-search-link').clearform({
                        form: '#search-form'
                    }
                );
                $('#clear-search-link').unbind('click.clear');
                $('#clear-search-link').bind('click.clear', function(){
                        $('#clearingSearch-search-form').val('1');
                        $('#clear-search-link').hide();
                        $(this).closest('form').find('.search-view-1').find('.dynamic-search-row').each(function()
                    {
                        $(this).remove();
                    });
                    $('#rowCounter-search-form').val(0);
                    $('#LeadsSearchForm_dynamicStructure').val('');
                    $(this).closest('form').find('.search-view-1').hide();
                    $('.select-list-attributes-view').hide();
                    resolveClearLinkPrefixLabelAndVisibility('search-form');
                    rebuildDynamicSearchRowNumbersAndStructureInput('search-form');
            $('#savedSearchId').val();
                     $('#LeadsSearchForm_savedSearchId').val('');
                     $('#save-search-area').hide();
                     jQuery.yii.submitForm(this, '', {}); return false;
            
                        $(this).closest('form').submit();
                        $('#clearingSearch-search-form').val('');
                        return false;
                    }
                );
                $('#more-search-link').unbind('click.more');
                $('#more-search-link').bind('click.more',  function(event){
                        $('.select-list-attributes-view').hide();
                        $('.kanban-board-options-view').hide();
                        $(this).closest('form').find('.search-view-1').toggle();
                        return false;
                    }
                );
                $('#cancel-advanced-search').unbind('click');
                $('#cancel-advanced-search').live('click', function(event){
                    $(this).closest('form').find('.search-view-1').hide();
                });
            
                $('#search-form').find('.anyMixedAttributes-input').unbind('input.clear propertychange.clear keyup.clear');
                $('#search-form').find('.anyMixedAttributes-input').bind('input.clear propertychange.clear keyup.clear', function(event)
                {
                    $('#clear-search-link').show();
                });
            $('#search-form').find('.anyMixedAttributes-input').unbind('input.clear propertychange.clear keyup.clear');
                     $('#search-form').find('.anyMixedAttributes-input').bind('input.clear propertychange.clear keyup.clear', function(event)
                     {
                         resolveClearLinkPrefixLabelAndVisibility('search-form');
                     });$('#save-as-advanced-search').click( function()
                    {
                        $('#save-search-area').show();
                        return false;
                    }
                );

                $('#show-dynamic-search-structure-div-link-search-form').click( function()
                    {
                        $('#show-dynamic-search-structure-div-search-form').show();
                        $('#show-dynamic-search-structure-div-link-search-form').hide();
                        return false;
                    }
                );
$('#search-form').yiiactiveform({'validateOnSubmit':true,'validateOnChange':false,'beforeValidate':$(this).beforeValidateAction,'afterValidate':afterDynamicSearchValidateAjaxAction,'afterValidateAjax':'var inputId = \'savedSearchId\';\n                        if (data.id != undefined)\n                        {\n                            var existingSearchFound = false;\n                            $(\'#\' + inputId + \' > option\').each(function()\n                            {\n                               if (this.value == data.id)\n                               {\n                                   $(\'#\' + inputId + \' option[value=\\\'\' + this.value + \'\\\']\').text(data.name);\n                                   existingSearchFound = true;\n                               }\n                            });\n                            if (!existingSearchFound)\n                            {\n                                $(\'#\' + inputId).removeClass(\'ignore-style\');\n                                $(\'#\' + inputId)\n                                    .append($(\'<option><\/option>\')\n                                    .attr(\'value\', data.id)\n                                    .text(data.name))\n                                //$(\'#\' + inputId).val(data.id); Do not select new saved search since it is not sticky at this point.\n                                $(\'#LeadsSearchForm_savedSearchId\').val(data.id);\n                            }\n                        }\n                        $(\'#search-form\').find(\'.attachLoadingTarget\').removeClass(\'loading\');\n                        $(\'#search-form\').find(\'.attachLoadingTarget\').removeClass(\'loading-ajax-submit\');\n                        $(\'#search-form\').find(\'.attachLoadingTarget\').removeClass(\'attachLoadingTarget\');$(this).closest(\'form\').find(\'.search-view-1\').hide();\n                        $(\'.select-list-attributes-view\').hide();\n                        $(\'#search-form\').find(\'.attachLoading:first\').removeClass(\'loading\');\n                        $(\'#search-form\').find(\'.attachLoading:first\').removeClass(\'loading-ajax-submit\');\n                        $(\'#list-view-selectedIds\').val(null);\n                        $.fn.yiiGridView.update(\'list-view\',\n                        {\n                            data: $(\'#search-form\').serialize() + \'&Contact_page=&Contact_sort=\' // Not Coding Standard\n                         }\n                        );\n                        $(\'#clearingSearch-search-form\').val(\'\');\n                        ','attributes':[{'id':'LeadsSearchForm_anyMixedAttributes','inputID':'LeadsSearchForm_anyMixedAttributes','errorID':'LeadsSearchForm_anyMixedAttributes_em_','model':'LeadsSearchForm','name':'anyMixedAttributes','enableAjaxValidation':true},{'id':'LeadsSearchForm_dynamicClauses','inputID':'LeadsSearchForm_dynamicClauses','errorID':'LeadsSearchForm_dynamicClauses','model':'LeadsSearchForm','name':'dynamicClauses','enableAjaxValidation':true},{'id':'LeadsSearchForm_savedSearchName','inputID':'LeadsSearchForm_savedSearchName','errorID':'LeadsSearchForm_savedSearchName_em_','model':'LeadsSearchForm','name':'savedSearchName','enableAjaxValidation':true},{'id':'LeadsSearchForm_dynamicStructure','inputID':'LeadsSearchForm_dynamicStructure','errorID':'LeadsSearchForm_dynamicStructure_em_','model':'LeadsSearchForm','name':'dynamicStructure','enableAjaxValidation':true},{'id':'LeadsSearchForm','inputID':'LeadsSearchForm_','errorID':'LeadsSearchForm__em_','model':'LeadsSearchForm','name':null,'enableAjaxValidation':true}],'summaryID':'search-form_es_'});
jQuery('#list-view-rowSelector_all').live('click', function()
{
    var checked = this.checked;

    //custom checkbox style
    if (this.checked){
        jQuery(this).parent().addClass('c_on');
    }
    else
    {
        jQuery(this).parent().removeClass('c_on');
    }

    jQuery("input[name='list-view-rowSelector\[\]']").each(function()
    {
        this.checked = checked;
        updateListViewSelectedIds('list-view', $(this).val(), checked);

        //custom checkbox style
        if (this.checked){
            jQuery(this).parent().addClass('c_on');
        }
        else
        {
            jQuery(this).parent().removeClass('c_on');
        }
    });
});
jQuery("input[name='list-view-rowSelector\[\]']").live('click', function()
{
    jQuery('#list-view-rowSelector_all').attr( 'checked', jQuery("input[name='list-view-rowSelector\[\]']").length == jQuery("input[name='list-view-rowSelector\[\]']:checked").length);
    updateListViewSelectedIds('list-view', $(this).val(), $(this).attr('checked'));

    //custom checkbox style
    if ( jQuery('#list-view-rowSelector_all').attr( 'checked') === 'checked' ){
        jQuery('#list-view-rowSelector_all').parent().addClass('c_on');
    }
    else
    {
        jQuery('#list-view-rowSelector_all').parent().removeClass('c_on');
    }
    if ( this.checked )
    {
        jQuery(this).parent().addClass('c_on');
    }
    else
    {
        jQuery(this).parent().removeClass('c_on');
    }
});
jQuery('#list-view').yiiGridView({'ajaxUpdate':['list-view'],'ajaxVar':'ajax','pagerClass':'pager vertical','loadingClass':'loading','filterClass':'filters','tableClass':'items','selectableRows':2,'enableHistory':false,'updateSelector':'{page}, {sort}','filterSelector':'{filter}','pageVar':'Contact_page','beforeAjaxUpdate':function(id, options) { $(this).makeSmallLoadingSpinner(true, "#" + id); addListViewSelectedIdsToUrl(id, options); },'afterAjaxUpdate':function(id, data) {
                        processAjaxSuccessError(id, data);
                        var $data = $(data);
                        jQuery.globalEval($data.filter("script").last().text());
                    }});

                processListViewSummaryClone("list-view", "summary", "list-view-summary-clone");
            
$('body').off('click.starDataColumn', '#starDataColumn_filterByStarred'); $('body').on('click.starDataColumn', '#starDataColumn_filterByStarred', function(){jQuery.ajax({'url':'/zurmo/app/index.php/leads/default','cache':false});return false;});
$('body').off('click.update', '#star-Contact-30'); $('body').on('click.update', '#star-Contact-30', function(){jQuery.ajax({'success':function(data){$('#star-Contact-30').removeClass().addClass(data)},'url':'/zurmo/app/index.php/zurmo/default/toggleStar?modelClassName=Contact&modelId=30','cache':false});return false;});

                $('#list-view-endless-page').unbind('click');
                $('#list-view-endless-page').bind('click', function(event)
                    {
                        $.fn.yiiGridView.update('list-view',
                        {
                            url: '/zurmo/app/index.php/leads/default/list?Contact_page=2',
                            type: 'GET',
                            success: function(data,status) {
                                var id = 'list-view';
                                var settings = $.fn.yiiGridView.settings[id];
                                $.each(settings.ajaxUpdate, function(i,v) {
                                    var id='#'+v;
                                    $(id).find('tbody:first').append($(id, data).find('tbody:first').html());
                                    $(id).find('.endless-list-pager').replaceWith($(id, data).find('.endless-list-pager'));
                                });
                                var $data = $(data);
                                jQuery.globalEval($data.filter('script').last().text());
                                if (settings.afterAjaxUpdate !== undefined)
                                    settings.afterAjaxUpdate(id, data);
                                $('#'+id).removeClass(settings.loadingClass);
                                //$.fn.yiiGridView.selectCheckedRows(id);
                            },
                        });
                        return false;
                    }
                );
});
/*]]>*/
</script>
</body>